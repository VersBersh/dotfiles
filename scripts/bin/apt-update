#!/usr/bin/env bash

# Quick script to handle upgrading Debian based systems

# A better class of script...
set -o errexit  # Exit on most errors (see the manual)
set -o errtrace # Make sure any error trap is inherited
set -o pipefail # Exit on failures earlier in a pipeline
#set -o xtrace  # Trace the execution of the script (debug)

if ! sudo -v 2> /dev/null; then
    echo 'This script requires sudo access.'
    exit 1
elif ! command -v apt-get > /dev/null; then
    echo 'This script requires sudo access.'
    exit 1
fi

echo '*** Updating package index files...'
sudo apt-get update > /dev/null

echo -e "\n*** Upgrading all installed packages..."
sudo apt-get dist-upgrade

echo -e "\n*** Cleaning the local repository..."
sudo apt-get autoremove

echo -e "\n*** Removing redundant packages..."
sudo apt-get autoclean

echo -e "\n*** Done!"

# vim: syntax=sh ts=4 sw=4 sts=4 et sr cc=78 tw=78
